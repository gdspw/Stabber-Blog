I"ó&<blockquote>
  <p><strong>èƒŒæ™¯</strong>ï¼šé¡¹ç›®çš„æ—¥å¸¸è¿­ä»£ï¼Œæ€»ä¼šæ¶‰åŠåˆ°å¯¹äºå·²æœ‰è¡¨çš„ç»“æ„è°ƒæ•´ï¼Œæ¯æ¬¡è¡¨ç»“æ„çš„å˜æ›´éƒ½ä¼šæ¶‰åŠåˆ°modelå¯¹åº”xmlçš„å˜æ›´ï¼Œæ¯æ¬¡çš„å˜æ›´éƒ½æ˜¯å°å¿ƒç¿¼ç¿¼ï¼Œä»¥æ±‚ä¸å½±å“å·²æœ‰çš„åŠŸèƒ½ï¼Œç€å®ä»¤äººå¤´ç–¼ï¼›ç›´åˆ°é‡è§Mapper4ï¼Œæ‰è§£å†³ä¹‹ä¸€éš¾é¢˜ã€‚</p>
</blockquote>

<hr />
<p>é€šç”¨Mapper4æ˜¯ä¸€ä¸ªå¯ä»¥å®ç°ä»»æ„MyBatisé€šç”¨æ–¹æ³•çš„æ¡†æ¶ï¼Œé¡¹ç›®æä¾›äº†å¸¸è§„çš„å¢åˆ ç›–èŒ¶æ“ä½œä»¥åŠExampleç›¸å…³çš„å•è¡¨æ“ä½œï¼Œæ˜¯ä¸ºäº†è§£å†³Mybatiä½¿ç”¨çš„90%çš„åŸºæœ¬æ“ä½œï¼Œä½¿ç”¨å®ƒå¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œå¼€å‘ï¼Œå¯ä»¥èŠ‚çœå¼€å‘äººå‘˜å¤§é‡çš„æ—¶é—´ã€‚
æœ¬æ–‡ä¸»è¦æ˜¯å¯¹é€šç”¨Mapperåšä¸‹æ ·ä¾‹çš„ä»‹ç»åŠä¾èµ–å¼•å…¥ã€é…ç½®ç­‰ï¼Œå¸Œæœ›èƒ½å¤Ÿå¯¹äºå„ä½é˜…è¯»çš„åŒå­¦æœ‰äº›è®¸å¸®åŠ©ã€‚</p>

<h3 id="1-å…ˆçœ‹ä¸‹æ ·ä¾‹">1. å…ˆçœ‹ä¸‹æ ·ä¾‹</h3>
<p>æ•°æ®åº“å¦‚ä¸‹è¡¨ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE TABLE `country` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®',
  `countryname` varchar(255) DEFAULT NULL COMMENT 'åç§°',
  `countrycode` varchar(255) DEFAULT NULL COMMENT 'ä»£ç ',
  PRIMARY KEY (`Id`)
) ENGINE=InnoDB AUTO_INCREMENT=10011 DEFAULT CHARSET=utf8 COMMENT='å›½å®¶ä¿¡æ¯';
</code></pre></div></div>

<p>å¯¹åº”çš„Javaå®ä½“ç±»å‹å¦‚ä¸‹ï¼š</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public class Country {
    @Id
    private Integer id;
    private String  countryname;
    private String  countrycode;

    //çœç•¥ getter å’Œ setter
}
</code></pre></div></div>
<p>æœ€ç®€å•çš„æƒ…å†µä¸‹ï¼Œåªéœ€è¦ä¸€ä¸ª@Id æ ‡è®°ä¸ºä¸»é”®å³å¯ï¼Œæ•°æ®åº“ä¸­çš„å­—æ®µåå’Œå®ä½“ç±»çš„å­—æ®µåæ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œè¿™ä¸­æƒ…å†µä¸‹å®ä½“å’Œè¡¨å¯ä»¥ç›´æ¥æ˜ å°„ã€‚
<strong>æé†’ï¼š</strong>å¦‚æœå®ä½“ç±»ä¸­æ²¡æœ‰ä¸€ä¸ªæ ‡è®° @Id çš„å­—æ®µï¼Œå½“ä½ ä½¿ç”¨å¸¦æœ‰ ByPrimaryKey çš„æ–¹æ³•æ—¶ï¼Œæ‰€æœ‰çš„å­—æ®µä¼šä½œä¸ºè”åˆä¸»é”®æ¥ä½¿ç”¨ï¼Œä¹Ÿå°±ä¼šå‡ºç°ç±»ä¼¼</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>where id = ? and countryname = ? and countrycode = ? çš„æƒ…å†µ
</code></pre></div></div>
<blockquote>
  <p>é€šç”¨Mapperæä¾›äº†å¤§é‡çš„é€šç”¨æ¥å£ï¼Œè¿™é‡Œä»¥æœ€å¸¸ç”¨çš„Mapperæ¥å£ä¸ºä¾‹
è¯¥å®ä½“ç±»å¯¹åº”çš„daoå±‚æ¥å£å¦‚ä¸‹ï¼š
```
import tk.mybatis.mapper.common.Mapper;</p>
</blockquote>

<p>public interface CountryMapper extends Mapper<Country> {}</Country></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>è¯¥æ¥å£é»˜è®¤é›†æˆçš„æ–¹æ³•å¦‚ä¸‹ï¼š
- selectOne
- select
- selectAll
- selectCount
- selectByPrimaryKey
- ç­‰ç­‰......
ä» MyBatis ä¸­è·å–è¯¥æ¥å£åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š
</code></pre></div></div>
<p>//ä» MyBatis æˆ–è€… Spring ä¸­è·å– countryMapperï¼Œç„¶åè°ƒç”¨ selectAll æ–¹æ³•
List<Country> countries = countryMapper.selectAll();
//æ ¹æ®ä¸»é”®æŸ¥è¯¢
Country country = countryMapper.selectByPrimaryKey(1);
//æˆ–è€…ä½¿ç”¨å¯¹è±¡ä¼ å‚ï¼Œé€‚ç”¨äº1ä¸ªå­—æ®µæˆ–è€…å¤šä¸ªå­—æ®µè”åˆä¸»é”®ä½¿ç”¨
Country query = new Country();
query.setId(1);
country = countryMapper.selectByPrimaryKey(query);</Country></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
å¦‚æœæƒ³è¦å¢åŠ è‡ªå·±å†™çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥åœ¨ContryMapperä¸­å¢åŠ ã€‚
#### 1.1 ä½¿ç”¨çº¯æ¥å£æ³¨è§£æ–¹å¼
</code></pre></div></div>
<p>import org.apache.ibatis.annotations.Select;
import tk.mybatis.mapper.common.Mapper;</p>

<p>public interface CountryMapper extends Mapper<Country> {
    @Select("select * from country where countryname = #{countryname}")
    Country selectByCountryName(String countryname);
}</Country></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;å¤æ‚çš„sqlä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œè¿™é‡Œåªæ˜¯ä¸€ä¸ªç®€å•çš„ä¸¾ä¾‹

#### 1.2 å¦‚æœä½¿ç”¨XMLæ–¹å¼ï¼Œéœ€è¦æä¾›æ¥å£å¯¹åº”çš„XMLæ–‡ä»¶
&gt;å¯¹ï¼Œä½ æ²¡æœ‰çœ‹é”™ï¼ŒMapperå¯ä»¥è·Ÿxmlæ–‡ä»¶å…±å­˜ï¼Œçœ‹åˆ°è¿™é‡Œæ˜¯ä¸æ˜¯è§‰å¾—å¾ˆæ„å¤–ï¼Œå“ˆå“ˆå“ˆï¼

ä¾‹å¦‚æä¾›äº† CountryMapper.xml æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
</code></pre></div></div>
<p>&lt;!DOCTYPE mapper
        PUBLIC â€œ-//mybatis.org//DTD Mapper 3.0//ENâ€
        â€œhttp://mybatis.org/dtd/mybatis-3-mapper.dtdâ€&gt;</p>
<mapper namespace="tk.mybatis.sample.mapper.CountryMapper">
    <select id="selectByCountryName" resulttype="tk.mybatis.model.Country">
        select * from country where countryname = #{countryname}
    </select>
</mapper>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>åœ¨æ¥å£ä¸­æ·»åŠ å¯¹åº”çš„æ–¹æ³•ï¼š
</code></pre></div></div>
<p>import tk.mybatis.mapper.common.Mapper;</p>

<p>public interface CountryMapper extends Mapper<Country> {
    Country selectByCountryName(String countryname);
}</Country></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;*åœ¨æ¥å£ä¸­æ·»åŠ å…¶ä»–æ–¹æ³•çš„æ—¶å€™å’Œåªç”¨ MyBatis æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œåœ¨å¯¹åº”çš„ XML ä¸­ï¼Œä¸èƒ½å‡ºç°å’Œç»§æ‰¿æ¥å£ä¸­åŒåçš„æ–¹æ³•ï¼*
&gt;å¤šæ€ï¼

&gt;åœ¨æ¥å£ä¸­ï¼Œåªè¦ä¸æ˜¯é€šè¿‡æ³¨è§£æ¥å®ç°æ¥å£æ–¹æ³•ï¼Œæ¥å£æ˜¯å…è®¸é‡åçš„ï¼ŒçœŸæ­£è°ƒç”¨ä¼šä½¿ç”¨é€šç”¨ Mapper æä¾›çš„æ–¹æ³•ã€‚

&gt;ä¾‹å¦‚åœ¨ä¸Šé¢ CountryMapper ä¸­æä¾›ä¸€ä¸ªå¸¦åˆ†é¡µçš„ selectAll æ–¹æ³•ï¼š

</code></pre></div></div>
<p>public interface CountryMapper extends Mapper<Country> {
    List<Country> selectAll(RowBounds rowBounds);
}</Country></Country></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;åœ¨ Java 8 çš„æ¥å£ä¸­é€šè¿‡é»˜è®¤æ–¹æ³•è¿˜èƒ½å¢åŠ ä¸€äº›ç®€å•çš„é—´æ¥è°ƒç”¨æ–¹&gt;æ³•ï¼Œä¾‹å¦‚ï¼š
</code></pre></div></div>
<p>public interface CountryMapper extends Mapper<Country> {
    //è¿™ä¸ªç¤ºä¾‹é€‚åˆå‚è€ƒå®ç°å¯¹ä¹è§‚é”æ–¹æ³•å°è£…
    default void updateSuccess(Country country){
        Assert.assertEquals(1, updateByPrimaryKey(country));
    }
}</Country></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
### 2. é›†æˆæ–¹å¼
#### 2.1 Springé›†æˆ
---
##### 2.1.1 æ·»åŠ ä¾èµ–
&gt;é€šç”¨Mapperæ”¯æŒMybatis 3.2.4+ï¼Œä½¿ç”¨è¯¥é€šç”¨Mapperçš„åŒå­¦æ³¨æ„å½“å‰é¡¹ç›®çš„Mybatisç‰ˆæœ¬å·
</code></pre></div></div>
<dependency>
    <groupId>tk.mybatis</groupId>
    <artifactId>mapper</artifactId>
    <version>æœ€æ–°ç‰ˆæœ¬</version>
</dependency>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>##### 2.1.2 XMLé…ç½®-MapperScannerConfigurer
å¼•å…¥é€šç”¨Mapper4ä¾èµ–åï¼Œåªéœ€è¦æ›¿æ¢XMLåŸæœ‰çš„*org.mybatis.spring.mapper.MapperScannerConfigurer* ä¸º*tk.mybatis.spring.mapper.MapperScannerConfigurer*ï¼Œä¸¤è€…çš„å”¯ä¸€åŒºåˆ«ä¸€ä¸ªæ˜¯ **tk** ä¸€ä¸ªæ˜¯ **org**ã€‚
</code></pre></div></div>
<bean class="tk.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="basePackage" value="æ‰«æåŒ…å" />
</bean>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>å¦‚æœéœ€è¦å¯¹Mapperè¿›è¡Œç‰¹æ®Šé…ç½®ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼ï¼š
</code></pre></div></div>
<bean class="tk.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="basePackage" value="tk.mybatis.mapper.mapper" />
    <property name="sqlSessionFactoryBeanName" value="sqlSessionFactory" />
    <property name="properties">
        <value>
            å‚æ•°å=å€¼
            å‚æ•°å2=å€¼2
            ...
        </value>
    </property>
</bean>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt;Springå¼•å…¥æ›´å¤šçš„é…ç½®ç›¸å…³å¯ä»¥ç§»æ­¥å®˜æ–¹ä»‹ç»ï¼šhttps://gitee.com/free/Mapper/wikis/1.2-spring?sort_id=208197

#### 2.1 Spring Boot é›†æˆ
Spring Boot åœ¨å¾®æœåŠ¡é¢†åŸŸä¸­å·²ç»æˆä¸ºä¸»æµã€‚

è¿™é‡Œä»‹ç»é€šç”¨ Mapper å¦‚ä½•åŒ Spring Boot è¿›è¡Œé›†æˆã€‚

ä¸ºäº†èƒ½é€‚åº”å„ç§æƒ…å†µçš„ç”¨æ³•ï¼Œè¿™é‡Œä¹Ÿæä¾›äº†å¤šç§é›†æˆæ–¹å¼ï¼ŒåŸºæœ¬ä¸Šåˆ†ä¸ºä¸¤å¤§ç±»ã€‚

- åŸºäº starter çš„è‡ªåŠ¨é…ç½®
- åŸºäº @MapperScan æ³¨è§£çš„æ‰‹å·¥é…ç½®

##### 2.1.1 mapper-spring-boot-starter
&gt;åœ¨ starter çš„é€»è¾‘ä¸­ï¼Œå¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ @MapperScan æ³¨è§£ï¼Œä½ å°±éœ€è¦åœ¨ä½ çš„æ¥å£ä¸Šå¢åŠ  @Mapper æ³¨è§£ï¼Œå¦åˆ™ MyBatis æ— æ³•åˆ¤æ–­æ‰«æå“ªäº›æ¥å£ã€‚

&gt;è¿™é‡Œçš„ç¬¬ä¸€ç§ç”¨æ³•æ²¡æœ‰ç”¨ @MapperScan æ³¨è§£ï¼Œæ‰€ä»¥ä½ éœ€è¦åœ¨æ‰€æœ‰æ¥å£ä¸Šå¢åŠ  @Mapper æ³¨è§£ã€‚

&gt;ä»¥åä¼šè€ƒè™‘å¢åŠ å…¶ä»–æ–¹å¼ã€‚

ä½ åªéœ€è¦æ·»åŠ é€šç”¨ Mapper æä¾›çš„ starter å°±å®Œæˆäº†æœ€åŸºæœ¬çš„é›†æˆï¼Œä¾èµ–å¦‚ä¸‹ï¼š
</code></pre></div></div>
<dependency>
  <groupId>tk.mybatis</groupId>
  <artifactId>mapper-spring-boot-starter</artifactId>
  <version>ç‰ˆæœ¬å·</version>
</dependency>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>å¦‚æœä½ éœ€è¦å¯¹é€šç”¨ Mapper è¿›è¡Œé…ç½®ï¼Œä½ å¯ä»¥åœ¨ Spring Boot çš„é…ç½®æ–‡ä»¶ä¸­é…ç½® mapper. å‰ç¼€çš„é…ç½®ã€‚

ä¾‹å¦‚åœ¨ yml æ ¼å¼ä¸­é…ç½®ï¼š
</code></pre></div></div>
<p>mapper:
  mappers:
    - tk.mybatis.mapper.common.Mapper
    - tk.mybatis.mapper.common.Mapper2
  notEmpty: true</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>åœ¨ properties é…ç½®ä¸­ï¼š
</code></pre></div></div>
<p>mapper.mappers=tk.mybatis.mapper.common.Mapper,tk.mybatis.mapper.common.Mapper2
mapper.notEmpty=true</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>##### 2.2.2 @MapperScan æ³¨è§£é…ç½®
ä½ å¯ä»¥ç»™å¸¦æœ‰ @Configuration çš„ç±»é…ç½®è¯¥æ³¨è§£ï¼Œæˆ–è€…ç›´æ¥é…ç½®åˆ° Spring Boot çš„å¯åŠ¨ç±»ä¸Šï¼Œå¦‚ä¸‹ï¼š
</code></pre></div></div>
<p>@tk.mybatis.spring.annotation.MapperScan(basePackages = â€œæ‰«æåŒ…â€)
@SpringBootApplication
public class SampleMapperApplication implements CommandLineRunner {
```
<strong>æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨çš„ tk.mybatis.spring.annotation.MapperScan !</strong></p>

<blockquote>
  <p>ä»¥ä¸Šå°±æ˜¯å¯¹äºMapper4çš„ç®€è¦ä»‹ç»ï¼Œæ›´å¤šåŠŸèƒ½å¯å‚è€ƒå®˜ç½‘ï¼šhttps://gitee.com/free/Mapper ,å¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°å¤§å®¶ï¼Œå‡è½»ç¹ççš„é‡å¤çš„å·¥ä½œï¼Œæé«˜codingæ•ˆç‡ï¼Œæ„Ÿè°¢é˜…è¯»æœ¬æ–‡ï¼</p>
</blockquote>
:ET